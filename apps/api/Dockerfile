# apps/api/Dockerfile
FROM node:16

WORKDIR /usr/src/api

# Copia los archivos de configuraci贸n de paquetes
COPY ./apps/api/package.json ./package.json
COPY ./apps/api/package-lock.json ./package-lock.json

# Instala las dependencias
RUN npm install --registry=https://registry.npm.taobao.org
RUN npm config set fetch-retry-maxtimeout 600000

# Copia el c贸digo fuente de la API
COPY ./apps/api .

# Compila la aplicaci贸n
RUN npm run build

# Comando para ejecutar la API en producci贸n
CMD ["npm", "run", "start:prod"]
